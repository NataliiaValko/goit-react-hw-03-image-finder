(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{10:function(e,t,a){e.exports={gallery:"App_gallery__2HPSs",gallery__text:"App_gallery__text__1brC-",gallery__request:"App_gallery__request__3iwPy",gallery__error:"App_gallery__error__OnM-6",modal__image:"App_modal__image__2Wy2f"}},12:function(e,t,a){e.exports={backdrop:"Modal_backdrop__vVAU6",content:"Modal_content__3LFlp",button:"Modal_button__1RnL4"}},14:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__3Yj61",ImageGalleryItem__image:"ImageGalleryItem_ImageGalleryItem__image__3oI3N"}},15:function(e,t,a){e.exports={loader:"Loader_loader__10QJN",loader__text:"Loader_loader__text__jbEoi"}},17:function(e,t,a){e.exports={container:"Container_container__3XD_N"}},19:function(e,t,a){e.exports={imageGallery__list:"ImageGallery_imageGallery__list__2fhyQ"}},20:function(e,t,a){e.exports={button:"Button_button__2VTfs"}},28:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(4),r=a.n(o),s=(a(27),a(28),a(16)),c=a(5),l=a(6),i=a(8),u=a(7),d=a(11),h=(a(29),a(18)),m=a(17),g=a.n(m),_=a(2),p=function(e){var t=e.children;return Object(_.jsx)("div",{className:g.a.container,children:t})},b=a(9),j=a.n(b),y=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={query:""},e.handleQueryChange=function(t){e.setState({query:t.currentTarget.value.toLowerCase().trim()})},e.handleSubmit=function(t){t.preventDefault(),e.state.query?(e.props.onSubmit(e.state.query),e.setState({query:""})):d.b.error("Please, enter your request!")},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(_.jsx)("header",{className:j.a.header,children:Object(_.jsx)(p,{children:Object(_.jsxs)("form",{onSubmit:this.handleSubmit,className:j.a.searchForm,children:[Object(_.jsx)("input",{className:j.a.searchForm__input,name:"queryToSearch",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:this.handleQueryChange,value:this.state.query}),Object(_.jsx)("button",{type:"submit",className:j.a.searchForm__button,children:Object(_.jsx)(h.a,{className:j.a.icon})})]})})})}}]),a}(n.Component),f="22065853-88fcaf807f7c22500af22ab22",O={fetchImage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return fetch("https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&key=").concat(f,"&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.json()}))}},x=a(14),v=a.n(x),w=function(e){var t=e.openModal,a=e.toggleOnLoading,n=e.webformatURL,o=e.largeImageURL,r=e.tags,s=void 0===r?"photo":r;return Object(_.jsx)("li",{className:v.a.ImageGalleryItem,children:Object(_.jsx)("img",{onClick:function(e){t(e.target.dataset.large),a()},src:n,"data-large":o,alt:s,className:v.a.ImageGalleryItem__image})})},I=a(19),S=a.n(I),L=function(e){var t=e.images,a=e.toggleOnLoading,n=e.openModal;return Object(_.jsx)(_.Fragment,{children:Object(_.jsx)("ul",{className:S.a.imageGallery__list,children:t.map((function(e){var t=e.id,o=e.webformatURL,r=e.largeImageURL,s=e.tags;return Object(_.jsx)(w,{openModal:n,toggleOnLoading:a,webformatURL:o,largeImageURL:r,tags:s},t)}))})})},M=a(20),k=a.n(M),N=function(e){var t=e.handleIncrement;return Object(_.jsx)("button",{type:"button",className:k.a.button,onClick:t,children:"Load more"})},C=a(21),q=a(12),F=a.n(q),G=document.querySelector("#modal-root"),A=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleBackdropClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(o.createPortal)(Object(_.jsx)("div",{className:F.a.backdrop,onClick:this.handleBackdropClick,children:Object(_.jsxs)("div",{className:F.a.content,children:[Object(_.jsx)("button",{type:"button",className:F.a.button,onClick:this.props.onClose,children:Object(_.jsx)(C.a,{})}),this.props.children]})}),G)}}]),a}(n.Component),U=a(22),R=a.n(U),D=a(15),E=a.n(D),Q=function(){return Object(_.jsxs)("div",{className:E.a.loader,children:[Object(_.jsx)(R.a,{type:"Bars",color:"#5ab1e4",height:80,width:80}),Object(_.jsx)("p",{className:E.a.loader__text,children:"Loading..."})]})},B=a(10),P=a.n(B),T="idle",J="pending",K="resolved",W="rejected",z="loading",H=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={query:"",images:[],page:1,error:"",status:T,total:null,showModal:!1,urlModal:"",onLoading:!1},e.openModal=function(t){e.setState((function(e){return{showModal:!e.showModal,urlModal:t}}))},e.closeModal=function(){e.setState((function(e){return{showModal:!e.showModal,urlModal:""}}))},e.toggleOnLoading=function(){e.setState((function(e){return{onLoading:!e.onLoading}}))},e.handleFormSubmit=function(t){e.setState({images:[],query:t,page:1,status:z,total:"null"})},e.handleIncrement=function(){e.setState({page:e.state.page+1})},e}return Object(l.a)(a,[{key:"onGetImages",value:function(e,t){var a=this;O.fetchImage(e,t).then((function(e){var t=e.hits,n=e.total;a.setState({images:[].concat(Object(s.a)(a.state.images),Object(s.a)(t)),total:n/12>500?500:n/12}),t[0]?a.setState({status:K}):a.setState({status:W,error:"We couldn\u2019t find anything =/. Change your request, please!"})})).catch((function(e){a.setState({status:W,error:"".concat(e)})}))}},{key:"componentDidUpdate",value:function(e,t){var a=this.state.query,n=this.state.page;this.state.status===z&&(this.setState({error:"",status:J}),this.onGetImages(a,n)),this.state.status!==z&&t.page!==n&&(this.setState({error:""}),this.onGetImages(a,n)),this.state.showModal||t.showModal||window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}},{key:"render",value:function(){var e=this.state,t=e.query,a=e.images,n=e.page,o=e.error,r=e.status,s=e.total,c=e.onLoading,l=e.showModal,i=e.urlModal;return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(d.a,{}),Object(_.jsx)(y,{onSubmit:this.handleFormSubmit}),Object(_.jsx)("section",{className:P.a.gallery,children:Object(_.jsxs)(p,{children:["idle"===r&&Object(_.jsx)("p",{className:P.a.gallery__request,children:"Please, enter your request!"}),"rejected"===r&&Object(_.jsxs)("p",{className:P.a.gallery__error,children:["Oops! ",o]}),"resolved"===r&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("p",{className:P.a.gallery__text,children:['Results on request of "',t,'"']}),Object(_.jsx)(L,{images:a,openModal:this.openModal,toggleOnLoading:this.toggleOnLoading}),n<s&&Object(_.jsx)(N,{handleIncrement:this.handleIncrement})]}),"pending"===r&&Object(_.jsx)(Q,{})]})}),l&&Object(_.jsxs)(A,{onClose:this.closeModal,children:[c&&Object(_.jsx)(Q,{}),Object(_.jsx)("img",{onLoad:this.toggleOnLoading,src:i,alt:"",className:P.a.modal__image})]})]})}}]),a}(n.Component);r.a.render(Object(_.jsx)(n.StrictMode,{children:Object(_.jsx)(H,{})}),document.getElementById("root"))},9:function(e,t,a){e.exports={header:"Searchbar_header__20Kde",searchForm:"Searchbar_searchForm__tQY3G",searchForm__input:"Searchbar_searchForm__input__3Z392",searchForm__button:"Searchbar_searchForm__button__3znW9",icon:"Searchbar_icon__1foQJ"}}},[[51,1,2]]]);
//# sourceMappingURL=main.11ed7ac4.chunk.js.map